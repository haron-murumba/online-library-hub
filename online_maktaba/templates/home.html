{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section text-center">
    <div class="container">
        <h1 class="display-4 mb-4">Welcome to Online Maktaba</h1>
        <p class="lead mb-4">Access thousands of learning resources for primary and secondary school students</p>
        
        <!-- Search Form -->
        <form action="{% url 'search' %}" method="get" class="row g-3 justify-content-center">
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" name="q" class="form-control form-control-lg" 
                           placeholder="Search for books, study materials, past papers...">
                    <button class="btn btn-light btn-lg" type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

<!-- Quick Access Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-md-4">
                <a href="{% url 'book_list' %}?level=primary" class="btn btn-primary btn-lg">
                    <i class="fas fa-child"></i><br>
                    Primary School
                </a>
            </div>
            <div class="col-md-4">
                <a href="{% url 'book_list' %}" class="btn btn-success btn-lg">
                    <i class="fas fa-book"></i><br>
                    All Books
                </a>
            </div>
            <div class="col-md-4">
                <a href="{% url 'book_list' %}?level=secondary" class="btn btn-info btn-lg">
                    <i class="fas fa-graduation-cap"></i><br>
                    Secondary School
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Primary School Books -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-4">Primary School Resources</h2>
        <div class="row">
            {% for book in primary_books %}
            <div class="col-md-3 mb-4">
                <div class="card book-card">
                    <span class="badge bg-primary category-badge">{{ book.category.name }}</span>
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" class="card-img-top" alt="{{ book.title }}">
                    {% else %}
                    <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center" 
                         style="height: 200px;">
                        <i class="fas fa-book fa-3x text-white"></i>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ book.title }}</h5>
                        <p class="card-text text-muted">{{ book.author }}</p>
                        <p class="card-text"><small class="text-muted">{{ book.subject }}</small></p>
                        <a href="{% url 'book_detail' book.pk %}" class="btn btn-outline-primary btn-sm">
                            View Details
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'book_list' %}?level=primary" class="btn btn-primary">View All Primary Resources</a>
        </div>
    </div>
</section>

<!-- Secondary School Books -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-4">Secondary School Resources</h2>
        <div class="row">
            {% for book in secondary_books %}
            <div class="col-md-3 mb-4">
                <div class="card book-card">
                    <span class="badge bg-success category-badge">{{ book.category.name }}</span>
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" class="card-img-top" alt="{{ book.title }}">
                    {% else %}
                    <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center" 
                         style="height: 200px;">
                        <i class="fas fa-book fa-3x text-white"></i>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ book.title }}</h5>
                        <p class="card-text text-muted">{{ book.author }}</p>
                        <p class="card-text"><small class="text-muted">{{ book.subject }}</small></p>
                        <a href="{% url 'book_detail' book.pk %}" class="btn btn-outline-success btn-sm">
                            View Details
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'book_list' %}?level=secondary" class="btn btn-success">View All Secondary Resources</a>
        </div>
    </div>
</section>

<!-- Study Resources -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-4">Study Resources</h2>
        <div class="row">
            {% for resource in recent_resources %}
            <div class="col-md-4 mb-4">
                <div class="card text-center">
                    <div class="card-body">
                        {% if resource.resource_type == 'worksheet' %}
                        <i class="fas fa-file-alt resource-icon text-warning"></i>
                        {% elif resource.resource_type == 'notes' %}
                        <i class="fas fa-sticky-note resource-icon text-info"></i>
                        {% elif resource.resource_type == 'video' %}
                        <i class="fas fa-video resource-icon text-danger"></i>
                        {% elif resource.resource_type == 'quiz' %}
                        <i class="fas fa-question-circle resource-icon text-success"></i>
                        {% else %}
                        <i class="fas fa-file-pdf resource-icon text-primary"></i>
                        {% endif %}
                        
                        <h5 class="card-title">{{ resource.title }}</h5>
                        <p class="card-text">{{ resource.description|truncatewords:20 }}</p>
                        <span class="badge bg-secondary">{{ resource.get_resource_type_display }}</span>
                        <span class="badge bg-{{ resource.level == 'primary'|yesno:'primary,success' }}">
                            {{ resource.level|title }}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'study_resources' %}" class="btn btn-info">View All Study Resources</a>
        </div>
    </div>
</section>
{% endblock %}